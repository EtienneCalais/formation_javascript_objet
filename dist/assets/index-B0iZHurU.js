var U=Object.defineProperty;var R=(n,e,t)=>e in n?U(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>R(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const m=class m{constructor(e,t=!1,o="todo",s=5){return this.name=e,this.isEdit=t,this.type=o,this.poids=s,this}toSerialise(){return JSON.stringify(this)}toDeserialise(e){let t=JSON.parse(e);return new m(t.name,t.isEdit,t.type,t.poids)}getName(){return this.name}setName(e){this.name=e}getIsEdit(){return this.isEdit}setIsEdit(e){this.isEdit=e}getType(){return this.type}setType(e){this.type=e}getPoids(){return this.poids}setPoids(e){this.poids=e}};d(m,"name"),d(m,"isEdit"),d(m,"type"),d(m,"poids");let D=m;const p=class p{constructor(e=new Date(Date.now()).toDateString(),t=new Map){this.date=e,this.taches=t}toSerialise(){const e={date:this.date,taches:Array.from(this.taches,([t,o])=>[t,o.toSerialise()])};return JSON.stringify(e)}toDeserialise(e){let t=JSON.parse(e);const o=new Map(t.taches),s=new D,a=Array.from(o,([i,l])=>[i,s.toDeserialise(l)]);return new p(t.date,new Map(a))}getDate(){return this.date}setDate(e){this.date=e}getTaches(){return this.taches}setTaches(e){this.taches=e}addTaskDay(e){if(e.nom&&(this.getTaskDay(e.nom)?alert("La tâche existe déjà"):this.taches.set(e.nom,e)),this.getTaskDay(e))alert("La tâche existe déjà");else{let t=new D(e);this.taches.set(e,t)}}getTaskDay(e){if(this.taches.size>0)return this.taches.get(e)}delTaskDay(e){return this.taches.delete(e)}};d(p,"date"),d(p,"taches");let T=p;const g=class g{constructor(e,t=new Date(Date.now()).toDateString(),o=new Map,s=!1){return this.nom=e,this.date=t,this.taches=o,this.actif=s,this}toSerialise(){const e={nom:this.nom,date:this.date,taches:Array.from(this.taches,([t,o])=>[t,o.toSerialise()]),actif:this.actif};return JSON.stringify(e)}toDeserialise(e){let t=JSON.parse(e);const o=new Map(t.taches),s=new T;let a=Array.from(o,([i,l])=>[i,s.toDeserialise(l)]);return new g(t.nom,t.date,new Map(Array.from(new Map(a))),t.actif)}getNom(){return this.nom}setNom(e){this.nom=e}match(e){return e===this.nom}addTaskDay(e){return this.taches.addTaskDay(e)}getTaskDay(e){if(this.taches.get(e))return this.taches.get(e);{const t=new T(e);return this.taches.set(e,t),this.taches.get(e)}}delTaskDay(e){return this.taches.deleteItem(e)}};d(g,"nom"),d(g,"date"),d(g,"taches",new Map),d(g,"actif");let b=g;class M{constructor(e={categories:[]}){this.info=e}toSerialise(){const e={info:{categories:new Array}};for(let t=0;t<this.info.categories.length;t++)e.info.categories.push(this.info.categories[t].toSerialise());return JSON.stringify(e)}toDeserialise(e){let t=JSON.parse(e),o=new b;for(let s=0;s<t.info.categories.length;s++)this.info.categories.push(o.toDeserialise(t.info.categories[s]));return this}getInfoG(){return this.info}addCategorie(e,t){let o=!1;for(let s=0;s<this.info.categories.length;s++)if(this.info.categories[s].match(e)){o=!0;break}if(o)alert("Thème existant");else{const s=new b(e,t);return this.info.categories.push(s),this.setActifPersonne(s.getNom()),s}}getPersonne(e){for(let t=0;t<this.info.categories.length;t++)if(this.info.categories[t].match(e))return this.info.categories[t];return!1}setActifPersonne(e){for(let t=0;t<this.info.categories.length;t++)this.info.categories[t].match(e)?this.info.categories[t].actif=!0:this.info.categories[t].actif=!1;return!1}getActifPersonne(){for(let e=0;e<this.info.categories.length;e++)if(this.info.categories[e].actif)return this.info.categories[e].nom;return!1}getAllPersonne(){return this.info.categories}delPersonne(e){for(let t=0;t<this.info.categories.length;t++)if(this.info.categories[t].match(e)&&confirm("Souhaitez-vous supprimer définitivement le thème?"))return this.info.categories.splice(t,1),!0;return!1}addTaskDay(e,t){return this.getPersonne(e).addTaskDay(t)}getTaskDay(e,t){return this.getPersonne(e).getTaskDay(t)}delTaskDay(e,t){return this.getPersonne(e).delPersonne(t)}addTaskDayToDo(e,t,o){return this.getTaskDay(e,t).addToDo(o)}getaskDayToDo(e,t){return this.getTaskDay(e,t)}getToDo(e,t,o){return this.getTaskDay(e,t).getToDoTache(o)}delTaskDayToDo(e,t,o){return this.getTaskDay(e,t).delToDo(o)}}d(M,"info");var F=new M;function N(){return F}let c=N();const j=document.getElementById("input2");let h="",S="Lundi",u,k=!0;const w=document.getElementById("ul0"),E=document.getElementById("ul1"),q=document.getElementById("form1"),G=document.getElementById("form2"),K=document.getElementById("form3"),A=document.getElementById("input1");let f=0;const I=document.getElementById("ul2"),L=document.getElementById("ul3"),P=document.getElementById("day-select"),O=new Date(Date.now()),x=document.getElementById("div1"),J=document.getElementById("div2"),W=document.getElementById("div21"),Y=document.getElementById("div22");let y=O.getDate(),v=O.getMonth()+1;y<10&&(y="0"+y);v<10&&(v="0"+v);const H=O.getFullYear()+"-"+v+"-"+y;P.value=H;S=new Date(P.value).toDateString();const Q=()=>{x.hidden=!1,J.hidden=!1},r=()=>{u=c.getPersonne(h).getTaskDay(S),ue(),de()};c=N();P.addEventListener("change",n=>{S=new Date(P.value).toDateString(),r()});q.addEventListener("submit",n=>{n.preventDefault();const e=A.value;A.value="",te(e)});G.addEventListener("submit",n=>{n.preventDefault();const e=j.value;h=e,k=!0,c.addCategorie(e,S),Q(),C(e),r()});K.addEventListener("submit",n=>{n.preventDefault(),confirm("Souhaitez-vous supprimer définitivement le storage?")&&(localStorage.removeItem("TODODATA"),k=!1,window.location=document.location)});const V=n=>{const e=document.createElement("li"),t=document.createElement("span"),o=document.createElement("p"),s=document.createElement("button");return s.textContent="Supprimer le thème",s.addEventListener("click",a=>{a.stopPropagation(),se(n)}),t.className="todo",o.textContent=n,e.className="ligne",e.addEventListener("click",a=>{C(n)}),e.append(t,o,s),e},X=n=>{const e=document.createElement("li"),t=document.createElement("span"),o=document.createElement("p");return t.className="todo done",o.textContent=n,e.className="ligne",e.addEventListener("click",s=>{C(n)}),e.append(t,o),e},Z=n=>{let e=u.getTaches().get(n);const t=document.createElement("li"),o=document.createElement("span"),s=document.createElement("p");let a=document.createElement("Input");const i=document.createElement("button");return i.textContent="Supprimer",a.type="number",a.min="1",a.max="5",a.className="poids",a.maxlength="1",a.value=e.getPoids(),a.addEventListener("change",l=>{oe(e,a)}),i.addEventListener("click",l=>{l.stopPropagation(),ne(e)}),t.addEventListener("dblclick",l=>{l.stopPropagation(),z(e)}),o.className="todo",s.textContent=e.getName(),o.addEventListener("click",l=>{ce(e)}),t.append(o,s,a,i),t.className="ligne",t.addEventListener("dragover",()=>{f=e}),t},$=n=>{let e=u.getTaches().get(n);const t=document.createElement("li");let o=document.createElement("input");const s=document.createElement("button"),a=document.createElement("button");return a.addEventListener("click",i=>{i.stopPropagation(),z(e)}),s.addEventListener("click",i=>{i.stopPropagation(),le(e,o)}),A.type="text",o.value=e.getName(),s.textContent="Save",a.textContent="Cancel",t.draggable=!1,t.append(o,a,s),t.className="ligneEdit",t},_=n=>{let e=u.getTaches().get(n);const t=document.createElement("li"),o=document.createElement("span"),s=document.createElement("p");return o.className="todo done",s.textContent=e.getName(),t.className="ligne",o.addEventListener("click",a=>{re(e)}),t.draggable=!0,t.addEventListener("dragover",()=>{f=e}),t.append(o,s),t},ee=n=>{let e=u.getTaches().get(n);const t=document.createElement("li"),o=document.createElement("span"),s=document.createElement("p");o.className="todo done",s.textContent=e.getName(),t.className="ligne";const a=document.createElement("button");a.addEventListener("click",l=>{l.stopPropagation(),ae(e)});const i=document.createElement("button");return i.addEventListener("click",l=>{l.stopPropagation(),ie(n)}),a.textContent="Restore",i.textContent="Corbeille",t.append(o,s,a,i),t.addEventListener("dragover",()=>{f=e}),t},te=n=>{u.addTaskDay(n),r()},C=n=>{c.setActifPersonne(n),h=n,r()},ne=n=>{n.setType("delete"),r()},se=n=>{c.delPersonne(n),r()},oe=(n,e)=>{console.log(e.value),n.setPoids(e.value),r()},ae=n=>{n.setType("todo"),r()},ie=n=>{confirm("Souhaitez-vous supprimer définitivement la tâche?")&&(u.getTaches().delete(n),r())},re=n=>{n.setType("todo"),r()},ce=n=>{n.setType("done"),r()},z=n=>{n.setIsEdit(!1),r()},le=(n,e)=>{const t=e.value;n.setName(t),n.setIsEdit(!1),r()};setInterval(()=>{if(k){const n=JSON.stringify(N().toSerialise());localStorage.setItem("TODODATA",n)}},2e3);const de=()=>{w.textContent="";for(let n=0;n<c.getAllPersonne().length;n++)c.getAllPersonne()[n].actif&&w.append(X(c.getAllPersonne()[n].nom));for(let n=0;n<c.getAllPersonne().length;n++)c.getAllPersonne()[n].actif||w.append(V(c.getAllPersonne()[n].nom))},ue=()=>{if(E.textContent="",E.draggable=!0,I.draggable=!0,L.draggable=!0,I.textContent="",L.textContent="",u&&u.taches.size>0){const n=(e,t,o)=>{switch(e.getType()){case"todo":e.isEdit?E.append($(t)):E.append(Z(t));break;case"done":I.append(_(t));break;case"delete":L.append(ee(t))}};u.taches.forEach(n)}},B=()=>{x.hidden=!0,J.hidden=!0};if(localStorage.getItem("TODODATA")){c=N().toDeserialise(JSON.parse(localStorage.getItem("TODODATA")));let n=c.info.categories.length;n>0?(h!==c.getActifPersonne()&&(h=c.info.categories[n-1].getNom(),c.setActifPersonne(h)),j.value=h,r()):B()}else B();x.addEventListener("dragleave",()=>{f.setType("todo"),r()});W.addEventListener("dragleave",()=>{f.setType("done"),r()});Y.addEventListener("dragleave",()=>{f.setType("delete"),r()});
