var q=Object.defineProperty;var F=(n,e,t)=>e in n?q(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>F(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();const f=class f{constructor(e,t=!1,s="todo",o=5){return this.name=e,this.isEdit=t,this.type=s,this.poids=o,this}toSerialise(){return JSON.stringify(this)}toDeserialise(e){let t=JSON.parse(e);return new f(t.name,t.isEdit,t.type,t.poids)}getName(){return this.name}setName(e){this.name=e}getIsEdit(){return this.isEdit}setIsEdit(e){this.isEdit=e}getType(){return this.type}setType(e){this.type=e}getPoids(){return this.poids}setPoids(e){this.poids=e}};d(f,"name"),d(f,"isEdit"),d(f,"type"),d(f,"poids");let S=f;const v=class v{constructor(e=new Date(Date.now()).toDateString(),t=new Map){this.date=e,this.taches=t}toSerialise(){const e={date:this.date,taches:Array.from(this.taches,([t,s])=>[t,s.toSerialise()])};return JSON.stringify(e)}trier(){const e=Array.from(this.taches).sort((t,s)=>t[1].getPoids()-s[1].getPoids());this.taches=new Map(e)}toDeserialise(e){let t=JSON.parse(e);const s=new Map(t.taches),o=new S,a=Array.from(s,([i,u])=>[i,o.toDeserialise(u)]);return new v(t.date,new Map(a))}getDate(){return this.date}setDate(e){this.date=e}getTaches(){return this.taches}setTaches(e){this.taches=e}addTaskDay(e){if(e.name)return this.getTaskDay(e.name)?!1:(this.taches.set(e.name,e),!0);if(this.getTaskDay(e))return alert("La tâche existe déjà"),!1;{let t=new S(e);this.taches.set(e,t)}}getTaskDay(e){if(this.taches.size>0)return this.taches.get(e)}delTaskDay(e){return this.taches.delete(e)}};d(v,"date"),d(v,"taches");let k=v;const p=class p{constructor(e,t=new Date(Date.now()).toDateString(),s=new Map,o=!1){return this.nom=e,this.date=t,this.taches=s,this.actif=o,this}toSerialise(){const e={nom:this.nom,date:this.date,taches:Array.from(this.taches,([t,s])=>[t,s.toSerialise()]),actif:this.actif};return JSON.stringify(e)}toDeserialise(e){let t=JSON.parse(e);const s=new Map(t.taches),o=new k;let a=Array.from(s,([i,u])=>[i,o.toDeserialise(u)]);return new p(t.nom,t.date,new Map(Array.from(new Map(a))),t.actif)}getNom(){return this.nom}setNom(e){this.nom=e}match(e){return e===this.nom}addTaskDay(e){return this.taches.addTaskDay(e)}getTaskDay(e){if(this.taches.get(e))return this.taches.get(e);{const t=new k(e);return this.taches.set(e,t),this.taches.get(e)}}delTaskDay(e){return this.taches.deleteItem(e)}};d(p,"nom"),d(p,"date"),d(p,"taches",new Map),d(p,"actif");let E=p;class J{constructor(e={categories:[]}){this.info=e}toSerialise(){const e={info:{categories:new Array}};for(let t=0;t<this.info.categories.length;t++)e.info.categories.push(this.info.categories[t].toSerialise());return JSON.stringify(e)}toDeserialise(e){let t=JSON.parse(e),s=new E;for(let o=0;o<t.info.categories.length;o++)this.info.categories.push(s.toDeserialise(t.info.categories[o]));return this}getInfoG(){return this.info}addCategorie(e,t){let s=!1;for(let o=0;o<this.info.categories.length;o++)if(this.info.categories[o].match(e)){s=!0;break}if(s)alert("Thème existant");else{const o=new E(e,t);return this.info.categories.push(o),this.setActifPersonne(o.getNom()),o}}goToCategorie(e){for(let s=0;s<this.info.categories.length;s++)if(this.info.categories[s].match(e))return this.info.categories[s];const t=new E(e,jour);return this.info.categories.push(t),this.setActifPersonne(t.getNom()),t}getPersonne(e){for(let t=0;t<this.info.categories.length;t++)if(this.info.categories[t].match(e))return this.info.categories[t];return!1}setActifPersonne(e){for(let t=0;t<this.info.categories.length;t++)this.info.categories[t].match(e)?this.info.categories[t].actif=!0:this.info.categories[t].actif=!1;return!1}getActifPersonne(){for(let e=0;e<this.info.categories.length;e++)if(this.info.categories[e].actif)return this.info.categories[e].nom;return!1}getAllPersonne(){return this.info.categories}delPersonne(e){for(let t=0;t<this.info.categories.length;t++)if(this.info.categories[t].match(e)&&confirm("Souhaitez-vous supprimer définitivement le thème?"))return this.info.categories.splice(t,1),!0;return!1}addTaskDay(e,t){return this.getPersonne(e).addTaskDay(t)}getTaskDay(e,t){return this.getPersonne(e).getTaskDay(t)}delTaskDay(e,t){return this.getPersonne(e).delPersonne(t)}addTaskDayToDo(e,t,s){return this.getTaskDay(e,t).addToDo(s)}getaskDayToDo(e,t){return this.getTaskDay(e,t)}getToDo(e,t,s){return this.getTaskDay(e,t).getToDoTache(s)}delTaskDayToDo(e,t,s){return this.getTaskDay(e,t).delToDo(s)}}d(J,"info");var G=new J;function w(){return G}let c=w();const z=document.getElementById("input2");let g="",D="Lundi",l,O=!0;const T=document.getElementById("ul0"),b=document.getElementById("ul1"),K=document.getElementById("form1"),W=document.getElementById("form2"),Y=document.getElementById("form3"),C=document.getElementById("input1");let m=0;const A=document.getElementById("ul2"),L=document.getElementById("ul3"),y=document.getElementById("day-select"),x=new Date(Date.now()),B=document.getElementById("div1");document.getElementById("div0");const U=document.getElementById("div2"),$=document.getElementById("div21"),H=document.getElementById("div22");let N=x.getDate(),P=x.getMonth()+1;N<10&&(N="0"+N);P<10&&(P="0"+P);const Q=x.getFullYear()+"-"+P+"-"+N;y.value=Q;D=new Date(y.value).toDateString();const V=()=>{B.hidden=!1,U.hidden=!1},r=()=>{l=c.getPersonne(g).getTaskDay(D),fe(),he()};c=w();y.addEventListener("change",n=>{D=new Date(y.value).toDateString(),r()});K.addEventListener("submit",n=>{n.preventDefault();const e=C.value;C.value="",se(e)});W.addEventListener("submit",n=>{n.preventDefault();const e=z.value;g=e,O=!0,c.addCategorie(e,D),V(),M(e),r()});Y.addEventListener("submit",n=>{n.preventDefault(),confirm("Souhaitez-vous supprimer définitivement le storage?")&&(localStorage.removeItem("TODODATA"),O=!1,window.location=document.location)});const X=n=>{const e=document.createElement("li"),t=document.createElement("span"),s=document.createElement("p"),o=document.createElement("button");return o.textContent="Supprimer le thème",o.addEventListener("click",a=>{a.stopPropagation(),ae(n)}),t.className="todo",s.textContent=n,e.className="ligne",e.addEventListener("click",a=>{M(n)}),e.addEventListener("dragleave",a=>{ge(n)}),e.append(t,s,o),e},Z=n=>{const e=document.createElement("li"),t=document.createElement("span"),s=document.createElement("p");return t.className="todo done",s.textContent=n,e.className="ligne",e.addEventListener("click",o=>{M(n)}),e.append(t,s),e},_=n=>{let e=l.getTaches().get(n);const t=document.createElement("li"),s=document.createElement("span"),o=document.createElement("p");let a=document.createElement("Input"),i=document.createElement("Input");i.type="Date";const u=document.createElement("button"),I=document.createElement("button");switch(I.textContent="Reporter",u.textContent="Supprimer",a.type="number",a.min="1",a.max="5",a.className="poids",a.maxlength="1",a.value=e.getPoids(),i.value=y.value,a.addEventListener("change",h=>{ie(e,a)}),u.addEventListener("click",h=>{h.stopPropagation(),oe(e)}),I.addEventListener("click",h=>{h.stopPropagation(),me(e,new Date(i.value).toDateString())}),t.addEventListener("dblclick",h=>{h.stopPropagation(),R(e)}),s.className="todo",o.textContent=e.getName(),s.addEventListener("click",h=>{de(e)}),t.append(s,o,I,i,a,u),a.value){case"5":t.className+=" pcinq";break;case"4":t.className+=" pquatre";break;case"3":t.className+=" ptrois";break;case"2":t.className+=" pdeux";break;case"1":t.className+=" pun";break}return t.addEventListener("dragleave",()=>{m=e}),t},ee=n=>{let e=l.getTaches().get(n);const t=document.createElement("li");let s=document.createElement("input");const o=document.createElement("button"),a=document.createElement("button");return a.addEventListener("click",i=>{i.stopPropagation(),R(e)}),o.addEventListener("click",i=>{i.stopPropagation(),ue(e,s)}),C.type="text",s.value=e.getName(),o.textContent="Save",a.textContent="Cancel",t.draggable=!1,t.append(s,a,o),t.className="ligneEdit",t},te=n=>{let e=l.getTaches().get(n);const t=document.createElement("li"),s=document.createElement("span"),o=document.createElement("p");return s.className="todo done",o.textContent=e.getName(),t.className="ligne",s.addEventListener("click",a=>{le(e)}),t.draggable=!0,t.addEventListener("dragover",()=>{m=e}),t.append(s,o),t},ne=n=>{let e=l.getTaches().get(n);const t=document.createElement("li"),s=document.createElement("span"),o=document.createElement("p");s.className="todo done",o.textContent=e.getName(),t.className="ligne";const a=document.createElement("button");a.addEventListener("click",u=>{u.stopPropagation(),re(e)});const i=document.createElement("button");return i.addEventListener("click",u=>{u.stopPropagation(),ce(n)}),a.textContent="Restore",i.textContent="Corbeille",t.append(s,o,a,i),t.addEventListener("dragover",()=>{m=e}),t},se=n=>{l.addTaskDay(n),r()},M=n=>{c.setActifPersonne(n),g=n,r()},oe=n=>{n.setType("delete"),r()},ae=n=>{c.delPersonne(n),r()},ie=(n,e)=>{n.setPoids(e.value),r()},re=n=>{n.setType("todo"),r()},ce=n=>{confirm("Souhaitez-vous supprimer définitivement la tâche?")&&(l.getTaches().delete(n),r())},le=n=>{n.setType("todo"),r()},de=n=>{n.setType("done"),r()},R=n=>{n.setIsEdit(!1),r()},ue=(n,e)=>{const t=e.value;n.setName(t),n.setIsEdit(!1),r()},ge=(n,e)=>{c.goToCategorie(n).getTaskDay(D).addTaskDay(m)&&l.getTaches().delete(m.getName()),r()},me=(n,e)=>{c.goToCategorie(g).getTaskDay(e).addTaskDay(n)&&l.getTaches().delete(n.getName()),r()};setInterval(()=>{if(O){const n=JSON.stringify(w().toSerialise());localStorage.setItem("TODODATA",n)}},2e3);const he=()=>{T.textContent="",T.draggable=!0;for(let n=0;n<c.getAllPersonne().length;n++)c.getAllPersonne()[n].actif&&T.append(Z(c.getAllPersonne()[n].nom));for(let n=0;n<c.getAllPersonne().length;n++)c.getAllPersonne()[n].actif||T.append(X(c.getAllPersonne()[n].nom))},fe=()=>{if(b.textContent="",b.draggable=!0,A.draggable=!0,L.draggable=!0,A.textContent="",L.textContent="",l&&l.taches.size>0){l.trier();const n=(e,t,s)=>{switch(e.getType()){case"todo":e.isEdit?b.append(ee(t)):b.append(_(t));break;case"done":A.append(te(t));break;case"delete":L.append(ne(t))}};l.taches.forEach(n)}},j=()=>{B.hidden=!0,U.hidden=!0};if(localStorage.getItem("TODODATA")){c=w().toDeserialise(JSON.parse(localStorage.getItem("TODODATA")));let n=c.info.categories.length;n>0?((g=c.getActifPersonne())||(console.log("non"),g=c.info.categories[n-1].getNom(),c.setActifPersonne(g)),z.value=g,r()):j()}else j();B.addEventListener("dragover",()=>{m.setType("todo"),r()});$.addEventListener("dragover",()=>{m.setType("done"),r()});H.addEventListener("dragover",()=>{m.setType("delete"),r()});
